import{r as C,j as h,W as U,Y as V,a as T}from"./app-BzAoBXTv.js";import{I}from"./InputLabel-Bcbl1ORD.js";import{A as z}from"./AuthenticatedLayout-VwwM4rUS.js";import{S as O}from"./input-B9ZpeIwR.js";import{H as q}from"./button-CKCoHrFl.js";import"./transition-CH7iv4xw.js";import"./description-DR9UDIPA.js";var M={exports:{}},W="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G=W,J=G;function A(){}function H(){}H.resetWarningCache=A;var $=function(){function t(a,o,s,e,c,u){if(u!==J){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function r(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:H,resetWarningCache:A};return i.PropTypes=i,i};M.exports=$();var n=M.exports,k=function(){return k=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},k.apply(this,arguments)},F={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},Y=k({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,tabIndex:n.number,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},F),_=function(t){return typeof t=="function"},L=function(t){return t in F},N=function(t){return t.substr(2)},Q=function(t,r,i,a,o,s,e){var c=Object.keys(o).filter(L),u=Object.keys(s).filter(L),l=c.filter(function(d){return s[d]===void 0}),f=u.filter(function(d){return o[d]===void 0});l.forEach(function(d){var p=N(d),y=e[p];i(p,y),delete e[p]}),f.forEach(function(d){var p=a(t,d),y=N(d);e[y]=p,r(y,p)})},X=function(t,r,i,a,o){return Q(o,t.on.bind(t),t.off.bind(t),function(s,e){return function(c){var u;return(u=s(e))===null||u===void 0?void 0:u(c,t)}},r,i,a)},D=0,K=function(t){var r=Date.now(),i=Math.floor(Math.random()*1e9);return D++,t+"_"+i+D+String(r)},P=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},R=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},Z=function(t,r){return R(t).concat(R(r))},ee=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},ne=function(t){if(!("isConnected"in Node.prototype)){for(var r=t,i=t.parentNode;i!=null;)r=i,i=r.parentNode;return r===t.ownerDocument}return t.isConnected},B=function(t,r){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(r):t.setMode(r))},w=function(){return w=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},w.apply(this,arguments)},te=function(t,r,i){var a,o,s=t.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=r.id,s.src=r.src,s.async=(a=r.async)!==null&&a!==void 0?a:!1,s.defer=(o=r.defer)!==null&&o!==void 0?o:!1;var e=function(){s.removeEventListener("load",e),s.removeEventListener("error",c),i(r.src)},c=function(u){s.removeEventListener("load",e),s.removeEventListener("error",c),i(r.src,u)};s.addEventListener("load",e),s.addEventListener("error",c),t.head&&t.head.appendChild(s)},re=function(t){var r={},i=function(e,c){var u=r[e];u.done=!0,u.error=c;for(var l=0,f=u.handlers;l<f.length;l++){var d=f[l];d(e,c)}u.handlers=[]},a=function(e,c,u){var l=function(S){return u!==void 0?u(S):console.error(S)};if(e.length===0){l(new Error("At least one script must be provided"));return}for(var f=0,d=!1,p=function(S,j){d||(j?(d=!0,l(j)):++f===e.length&&c())},y=0,v=e;y<v.length;y++){var m=v[y],g=r[m.src];if(g)g.done?p(m.src,g.error):g.handlers.push(p);else{var b=K("tiny-");r[m.src]={id:b,src:m.src,done:!1,error:null,handlers:[p]},te(t,w({id:b},m),i)}}},o=function(){for(var e,c=0,u=Object.values(r);c<u.length;c++){var l=u[c],f=t.getElementById(l.id);f!=null&&f.tagName==="SCRIPT"&&((e=f.parentNode)===null||e===void 0||e.removeChild(f))}r={}},s=function(){return t};return{loadScripts:a,deleteScripts:o,getDocument:s}},ie=function(){var t=[],r=function(o){var s=t.find(function(e){return e.getDocument()===o});return s===void 0&&(s=re(o),t.push(s)),s},i=function(o,s,e,c,u){var l=function(){return r(o).loadScripts(s,c,u)};e>0?setTimeout(l,e):l()},a=function(){for(var o=t.pop();o!=null;o=t.pop())o.deleteScripts()};return{loadList:i,reinitialize:a}},oe=ie(),x=function(t){var r=t;return r&&r.tinymce?r.tinymce:null},ae=function(){var t=function(r,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=o[s])},t(r,i)};return function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function a(){this.constructor=r}r.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}}(),E=function(){return E=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},E.apply(this,arguments)},se=function(t){ae(r,t);function r(i){var a,o,s,e=t.call(this,i)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var c=e.editor,u=e.props.value;c&&u&&u!==e.currentContent&&c.undoManager.ignore(function(){if(c.setContent(u),e.valueCursor&&(!e.inline||c.hasFocus()))try{c.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(c){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&e.handleBeforeInput(c)},e.handleEditorChange=function(c){var u=e.editor;if(u&&u.initialized){var l=u.getContent();e.props.value!==void 0&&e.props.value!==l&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),l!==e.currentContent&&(e.currentContent=l,_(e.props.onEditorChange)&&e.props.onEditorChange(l,u))}},e.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&e.handleEditorChange(c)},e.initialise=function(c){var u,l,f;c===void 0&&(c=0);var d=e.elementRef.current;if(d){if(!ne(d)){if(c===0)setTimeout(function(){return e.initialise(1)},1);else if(c<100)setTimeout(function(){return e.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var p=x(e.view);if(!p)throw new Error("tinymce should have been loaded into global scope");var y=E(E(E(E({},e.props.init),{selector:void 0,target:d,readonly:e.props.disabled,inline:e.inline,plugins:Z((u=e.props.init)===null||u===void 0?void 0:u.plugins,e.props.plugins),toolbar:(l=e.props.toolbar)!==null&&l!==void 0?l:(f=e.props.init)===null||f===void 0?void 0:f.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(v){e.editor=v,e.bindHandlers({}),e.inline&&!P(d)&&v.once("PostRender",function(m){v.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&_(e.props.init.setup)&&e.props.init.setup(v)},init_instance_callback:function(v){var m,g,b=e.getInitialValue();e.currentContent=(m=e.currentContent)!==null&&m!==void 0?m:v.getContent(),e.currentContent!==b&&(e.currentContent=b,v.setContent(b),v.undoManager.clear(),v.undoManager.add(),v.setDirty(!1));var S=(g=e.props.disabled)!==null&&g!==void 0?g:!1;B(e.editor,S?"readonly":"design"),e.props.init&&_(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(v)}});e.inline||(d.style.visibility=""),P(d)&&(d.value=e.getInitialValue()),p.init(y)}},e.id=e.props.id||K("tiny-react"),e.elementRef=C.createRef(),e.inline=(s=(a=e.props.inline)!==null&&a!==void 0?a:(o=e.props.init)===null||o===void 0?void 0:o.inline)!==null&&s!==void 0?s:!1,e.boundHandlers={},e}return Object.defineProperty(r.prototype,"view",{get:function(){var i,a;return(a=(i=this.elementRef.current)===null||i===void 0?void 0:i.ownerDocument.defaultView)!==null&&a!==void 0?a:window},enumerable:!1,configurable:!0}),r.prototype.componentDidUpdate=function(i){var a=this,o,s;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(o=this.currentContent)!==null&&o!==void 0?o:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var u;if(!a.inline||e.hasFocus())try{u=e.selection.getBookmark(3)}catch{}var l=a.valueCursor;if(e.setContent(a.props.value),!a.inline||e.hasFocus())for(var f=0,d=[u,l];f<d.length;f++){var p=d[f];if(p)try{e.selection.moveToBookmark(p),a.valueCursor=p;break}catch{}}})}if(this.props.disabled!==i.disabled){var c=(s=this.props.disabled)!==null&&s!==void 0?s:!1;B(this.editor,c?"readonly":"design")}}},r.prototype.componentDidMount=function(){var i=this,a,o,s,e,c;if(x(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(o=(a=this.props).onScriptsLoadError)===null||o===void 0||o.call(a,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((s=this.elementRef.current)===null||s===void 0)&&s.ownerDocument){var u=function(){var f,d;(d=(f=i.props).onScriptsLoad)===null||d===void 0||d.call(f),i.initialise()},l=function(f){var d,p;(p=(d=i.props).onScriptsLoadError)===null||p===void 0||p.call(d,f)};oe.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&c!==void 0?c:0,u,l)}},r.prototype.componentWillUnmount=function(){var i=this,a=this.editor;a&&(a.off(this.changeEvents(),this.handleEditorChange),a.off(this.beforeInputEvent(),this.handleBeforeInput),a.off("keypress",this.handleEditorChangeSpecial),a.off("keydown",this.handleBeforeInputSpecial),a.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(o){a.off(o,i.boundHandlers[o])}),this.boundHandlers={},a.remove(),this.editor=void 0)},r.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},r.prototype.changeEvents=function(){var i,a,o,s=(o=(a=(i=x(this.view))===null||i===void 0?void 0:i.Env)===null||a===void 0?void 0:a.browser)===null||o===void 0?void 0:o.isIE();return s?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},r.prototype.beforeInputEvent=function(){return ee()?"beforeinput SelectionChange":"SelectionChange"},r.prototype.renderInline=function(){var i=this.props.tagName,a=i===void 0?"div":i;return C.createElement(a,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.renderIframe=function(){return C.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.getScriptSources=function(){var i,a,o=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async,s=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:o,defer:s}]:this.props.tinymceScriptSrc.map(function(l){return typeof l=="string"?{src:l,async:o,defer:s}:l});var e=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",u="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:u,async:o,defer:s}]},r.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},r.prototype.bindHandlers=function(i){var a=this;if(this.editor!==void 0){X(this.editor,i,this.props,this.boundHandlers,function(c){return a.props[c]});var o=function(c){return c.onEditorChange!==void 0||c.value!==void 0},s=o(i),e=o(this.props);!s&&e?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):s&&!e&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},r.propTypes=Y,r.defaultProps={cloudChannel:"7"},r}(C.Component);function ce({setData:t,editorRef:r}){return h.jsx(se,{apiKey:"8ruryyv1pw5lv0nudelhfsql8uqcb4ale6qf34711vk5r3iw",onInit:(i,a)=>r.current=a,onBlur:i=>{t("content",i.target.getContent())},init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"uundo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",content_style:"@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap'); * { font-family: 'Plus Jakarta Sans', sans-serif; font-optical-sizing: auto; }",automatic_uploads:!0,file_picker_types:"image",file_picker_callback:(i,a,o)=>{const s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.addEventListener("change",e=>{const c=e.target.files[0],u=new FileReader;u.addEventListener("load",()=>{const l="blobid"+new Date().getTime(),f=tinymce.activeEditor.editorUpload.blobCache,d=u.result.split(",")[1],p=f.create(l,c,d);f.add(p),i(p.blobUri(),{title:c.name})}),u.readAsDataURL(c)}),s.click()}}})}function ye({chapter:t}){const r=C.useRef(null),[i,a]=C.useState("media"),{setData:o,errors:s,post:e}=U({title:"",media:"",content:"",type:i});function c(u){u.preventDefault(),e(route("dashboard.material.store",t.id))}return h.jsxs(z,{isAdmin:!0,children:[h.jsx(V,{title:"Create Material"}),h.jsx("div",{className:"container mx-auto",children:h.jsx("div",{className:"mt-10 rounded-lg bg-white p-10 text-accent",children:h.jsxs("form",{onSubmit:c,className:"flex flex-col gap-y-4",encType:"multipart/form-data",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx(T,{href:route("dashboard.classroom.index"),className:"text-lg font-bold text-primary",children:t.title}),h.jsx("h2",{className:"text-lg font-bold",children:"Material Create Form"})]}),h.jsx("hr",{}),h.jsxs("div",{className:"flex flex-col gap-y-3",children:[h.jsx(I,{children:"Title"}),h.jsx(O,{id:"title",type:"text",className:"h-10 w-full rounded-lg",required:!0,onChange:u=>o("title",u.target.value)}),s.title&&h.jsx("div",{children:s.title})]}),i==="text"&&h.jsx(ce,{setData:o,editorRef:r}),i==="media"&&h.jsxs("div",{className:"flex flex-col gap-y-3",children:[h.jsx(I,{children:"File Material"}),h.jsx(O,{id:"media",type:"file",className:"h-10 w-full rounded-lg border border-black px-3 py-1 text-sm",required:!0,onChange:u=>o("media",u.target.files[0])}),s.media&&h.jsx("div",{children:s.media})]}),i==="quiz"&&h.jsx("div",{children:"Quiz"}),h.jsxs("div",{className:"flex w-full justify-between",children:[h.jsx(T,{href:route("dashboard.chapter.index",t.id),className:"text-primary",children:"Back"}),h.jsx(q,{type:"submit",className:"w-auto rounded-lg bg-primary px-3 py-1 text-lg text-white",children:"Save"})]})]})})})]})}export{ye as default};
